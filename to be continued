#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

int** creatematrix(int row, int column)
{
    int **a=new int*[row];
    for(int n=0;n<row;n++)
        a[n]=new int[column];
    for(int r=0;r<row;r++)
    {
        for(int c=0;c<column;c++)
            a[r][c]=rand()%101;
    }
    return a;
}
void printmatrix(int **a,int row, int column)
{
	for(int n=0;n<column;n++)
	{
		for(int i=0;i<row;i++)
			cout<<a[i][n]<<"\t";
		cout<<endl;
	}
}

int** matrixdotproduct(int **m,int row,int **n,int column)
{
    if(row==column)
    {
		int sum=0;
        int **c=new int*[row];
        for(int n=0;n<row;n++)
            c[n]=new int[column];
		
		for(int x=0;x<row;x++)
		{
			for(int y=0;y<row;y++)
			{
				for(int z=0;z<row;z++)
				{
					sum=sum+(m[z][y])*(n[x][z]);
				}
				c[x][y]=sum;
				sum=0;
			}
		}
        return c;
    }
    else
    {
        cout<<"rows of first matrix does not match columns of second matrix";
        return 0;
    }
}

void deletematrix(int **a,int row)
{
	for(int n=0;n<row;n++)
		delete []a[n];
	delete []a;
}

int main()
{
    int **m1=creatematrix(5,6);
    int **m2=creatematrix(3,5);
	printmatrix(m1,5,6);
	cout<<endl;
	printmatrix(m2,3,5);

	int **m=matrixdotproduct(m1,5,m2,5);
	cout<<endl;
	printmatrix(m,5,5);
	cout<<endl;

	deletematrix(m1,5);
	deletematrix(m2,3);
	deletematrix(m,5);

	system("Pause");
    return 0;
}
